(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7891:function(e,t,r){Promise.resolve().then(r.bind(r,5037))},5037:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),l=r(2265),s=r(1755),o=r(7501),n=e=>{let{languages:t,language:r,setLanguage:l}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700",children:"Select Language:"}),(0,a.jsx)("div",{className:"flex space-x-2",children:Object.keys(t).map(e=>(0,a.jsx)("button",{className:"px-2 py-1 rounded-full text-white text-sm ".concat(r===e?"bg-blue-500":"bg-gray-500"," hover:bg-blue-400"),onClick:()=>l(e),children:e},e))})]})},i=e=>{let{topics:t,topic:r,setTopic:l}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700",children:"Select Topic:"}),(0,a.jsx)("select",{value:r,onChange:e=>l(e.target.value),className:"block w-full mt-1 p-2 border rounded-md",children:t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})},c=e=>{let{writers:t,writer:r,setWriter:l}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700",children:"Select Writer:"}),(0,a.jsx)("select",{value:r,onChange:e=>l(e.target.value),className:"block w-full mt-1 p-2 border rounded-md",children:t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})},d=e=>{var t;let{prayer:r,backgrounds:s,expanded:o,dropdownOpen:n,toggleFullText:i,toggleDropdown:c,handleBackgroundChange:d,downloadPoster:h}=e,[u,m]=(0,l.useState)(s[0]);return(0,a.jsxs)("div",{className:"mb-4 p-4 border rounded-md",children:[(0,a.jsx)("p",{className:"block mb-2",children:o?r.text:(t=r.text)?t.split("\n").slice(0,3).join("\n"):""}),(0,a.jsx)("button",{onClick:i,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-700",children:o?"Show Less":"Show More"}),(0,a.jsx)("audio",{controls:!0,className:"w-full mt-2",children:(0,a.jsx)("source",{src:r.audioUrl,type:"audio/mp3"})},r.audioUrl),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-gray-700",children:"Select Background:"}),(0,a.jsx)("select",{value:u,onChange:e=>{m(e.target.value),d(e.target.value)},className:"block w-full mt-1 p-2 border rounded-md",children:s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"relative inline-block text-left mt-2",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500",id:"options-menu","aria-expanded":"true","aria-haspopup":"true",onClick:c,children:["Export",(0,a.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m0 8v1m0 8v1m-7-9h1m8 0h1m-8 8h1m0-8h1m-8-4h1m8 0h1m-8 0h1m-8 4h1m8 0h1m0 8h1m-8 0h1"})})]})}),n&&(0,a.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:(0,a.jsxs)("div",{className:"py-1",role:"none",children:[(0,a.jsx)("button",{onClick:()=>h("png",u,r.text),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Download Poster (PNG)"}),(0,a.jsx)("button",{onClick:()=>h("jpg",u,r.text),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Download Poster (JPG)"})]})})]})]})},h=e=>{let{prayers:t,backgrounds:r,expandedPrayers:l,dropdownOpen:s,toggleFullText:o,toggleDropdown:n,handleBackgroundChange:i,downloadPoster:c}=e;return(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-2",children:"All Prayers:"}),t.map((e,t)=>(0,a.jsx)(d,{prayer:e,backgrounds:r,expanded:l[t],dropdownOpen:s[t],toggleFullText:()=>o(t),toggleDropdown:()=>n(t),handleBackgroundChange:e=>i(t,e),downloadPoster:c},t))]})};r(3054);let u={english:"English",french:"French",arabic:"Arabic"},m=["sea.jpg","wall.jpg","fogs.jpg","moutain.jpg","sparkle.jpg"];var g=()=>{let[e,t]=(0,l.useState)("english"),[r,d]=(0,l.useState)([]),[g,x]=(0,l.useState)([]),[p,b]=(0,l.useState)(""),[f,y]=(0,l.useState)(""),[w,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[S,P]=(0,l.useState)(!1),[E,F]=(0,l.useState)([]),[L,O]=(0,l.useState)(""),[B,D]=(0,l.useState)({}),[U,G]=(0,l.useState)({}),[T,_]=(0,l.useState)({}),R=(0,l.useRef)(null);(0,l.useEffect)(()=>{M(),W(),Z()},[e]);let M=async()=>{try{let t=await s.Z.get("https://freepdflibrary.com/topics",{params:{language:e}});d(t.data),b(t.data[0])}catch(e){console.error("Error fetching topics:",e)}},W=async()=>{try{let t=await s.Z.get("https://freepdflibrary.com/writers",{params:{language:e}});x(t.data),y(t.data[0])}catch(e){console.error("Error fetching writers:",e)}},Z=async()=>{try{let e=await s.Z.get("https://freepdflibrary.com/list-prayers");F(e.data.prayers)}catch(e){console.error("Error fetching prayers:",e)}},A=async()=>{P(!0),j(""),N(""),C("");try{let t=await s.Z.post("https://freepdflibrary.com/generate-prayer",{topic:p,writer:f,language:e});j(t.data.prayer),N(t.data.audioUrl),C(t.data.textUrl),Z()}catch(e){console.error(e)}finally{P(!1)}},I=(e,t)=>{let r=R.current;if(!r){console.error("Canvas element not found");return}let a=r.getContext("2d");if(!a){console.error("Failed to get canvas context");return}let l=new Image;l.src="/backgrounds/".concat(e),l.onload=()=>{console.log("Image loaded successfully");let{width:e,height:s}=l;r.width=e,r.height=s,a.clearRect(0,0,r.width,r.height),a.drawImage(l,0,0,e,s),a.fillStyle="rgba(0, 0, 0, 0.05)",a.fillRect(0,0,r.width,r.height),a.fillStyle="#FFFFFF",a.textAlign="center",a.textBaseline="middle",a.shadowColor="rgba(0, 0, 0, 0.8)",a.shadowOffsetX=2,a.shadowOffsetY=2,a.shadowBlur=4;let o=.05*Math.min(r.width,r.height);a.font="".concat(o,"px Ubuntu");let n=z(a,t,.6*r.width),i=1.2*o,c=n.length*i,d=(r.height-c)/2;n.forEach(e=>{a.fillText(e,r.width/2,d),d+=i})},l.onerror=()=>{console.error("Error loading image")}},z=(e,t,r)=>{let a=t.split(" "),l=[],s=a[0];for(let t=1;t<a.length;t++){let o=a[t];e.measureText(s+" "+o).width<r?s+=" "+o:(l.push(s),s=o)}return l.push(s),l},J=(e,t,r)=>{I(t,r);let a=R.current;a&&setTimeout(()=>{a.toBlob(t=>{if(t){let r=document.createElement("a");r.href=URL.createObjectURL(t),r.download="poster.".concat(e),r.click()}else console.error("Failed to create blob")},"image/".concat(e))},1e3)},H=(e,t)=>{let r=new o.kH;r.text(e,10,10),r.save("".concat(t,".pdf"))},X=e=>{G(t=>({...t,[e]:!t[e]}))},Y=L?E.filter(e=>e.textUrl.toLowerCase().includes(L.toLowerCase())):E;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:(0,a.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-teal-400 to-blue-500 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-lg"}),(0,a.jsxs)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-lg sm:p-20",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Prayer Generator"}),(0,a.jsx)(n,{languages:u,language:e,setLanguage:t}),(0,a.jsx)(i,{topics:r,topic:p,setTopic:b}),(0,a.jsx)(c,{writers:g,writer:f,setWriter:y}),(0,a.jsx)("button",{onClick:A,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-700",disabled:S,children:S?"Generating...":"Generate Prayer"}),(0,a.jsx)("canvas",{ref:R,style:{display:"none"}}),w&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Prayer:"}),(0,a.jsx)("p",{className:"mb-4",children:w}),(0,a.jsxs)("div",{className:"mb-4 flex",children:[(0,a.jsx)("button",{onClick:()=>H(w,"prayer-".concat(p,"-").concat(e)),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-700",children:"Download Prayer as PDF"}),(0,a.jsxs)("div",{className:"relative inline-block text-left ml-2",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500",id:"options-menu","aria-expanded":"true","aria-haspopup":"true",onClick:()=>X(-1),children:["Export",(0,a.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m0 8v1m0 8v1m-7-9h1m8 0h1m-8 8h1m0-8h1m-8-4h1m8 0h1m-8 0h1m-8 4h1m8 0h1m0 8h1m-8 0h1"})})]})}),U[-1]&&(0,a.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:(0,a.jsxs)("div",{className:"py-1",role:"none",children:[(0,a.jsx)("button",{onClick:()=>J("png",T[-1]||m[0],w),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Download Poster (PNG)"}),(0,a.jsx)("button",{onClick:()=>J("jpg",T[-1]||m[0],w),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:"Download Poster (JPG)"})]})})]})]}),(0,a.jsx)("div",{className:"mb-4",children:v&&(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:v,type:"audio/mp3"})},v)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700",children:"Filter by Language:"}),(0,a.jsx)("div",{className:"flex space-x-2",children:Object.keys(u).map(e=>(0,a.jsx)("button",{className:"px-2 py-1 rounded-full text-white text-sm ".concat(L===e?"bg-blue-500":"bg-gray-500"," hover:bg-blue-400"),onClick:()=>O(e),children:e},e))})]}),(0,a.jsx)(h,{prayers:Y,backgrounds:m,expandedPrayers:B,dropdownOpen:U,toggleFullText:e=>{D(t=>({...t,[e]:!t[e]}))},toggleDropdown:X,handleBackgroundChange:(e,t)=>{_(r=>({...r,[e]:t}))},downloadPoster:J})]})]})})}},3054:function(){}},function(e){e.O(0,[141,505,431,971,23,744],function(){return e(e.s=7891)}),_N_E=e.O()}]);